{{define "docs-sidebar"}}
<div class="card">
    <div class="card-header">
        <h5 class="mb-0">
            <i class="fas fa-list me-2"></i>文档导航
        </h5>
    </div>
    <div class="accordion accordion-flush" id="docsNavAccordion">
        <!-- 开始使用 -->
        <div class="accordion-item">
            <h6 class="accordion-header" id="headingGettingStarted">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseGettingStarted" aria-expanded="false">
                    <i class="fas fa-book me-2 text-primary"></i>开始使用
                </button>
            </h6>
            <div id="collapseGettingStarted" class="accordion-collapse collapse" data-bs-parent="#docsNavAccordion">
                <div class="accordion-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="/docs/getting-started/overview" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "overview"}}active{{end}}">
                            <i class="fas fa-info-circle me-2"></i>概览与安装
                        </a>
                        <a href="/docs/getting-started/quickstart" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "quickstart"}}active{{end}}">
                            <i class="fas fa-rocket me-2"></i>快速开始
                        </a>
                        <a href="/docs/getting-started/structure" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "structure"}}active{{end}}">
                            <i class="fas fa-sitemap me-2"></i>项目结构
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- MVC核心 -->
        <div class="accordion-item">
            <h6 class="accordion-header" id="headingMvcCore">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMvcCore" aria-expanded="false">
                    <i class="fas fa-cube me-2 text-success"></i>MVC核心
                </button>
            </h6>
            <div id="collapseMvcCore" class="accordion-collapse collapse" data-bs-parent="#docsNavAccordion">
                <div class="accordion-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="/docs/mvc-core/application" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "application"}}active{{end}}">
                            <i class="fas fa-desktop me-2"></i>应用程序
                        </a>
                        <a href="/docs/mvc-core/controller" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "controller"}}active{{end}}">
                            <i class="fas fa-cogs me-2"></i>控制器基础
                        </a>
                        <a href="/docs/mvc-core/routing" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "routing"}}active{{end}}">
                            <i class="fas fa-route me-2"></i>路由系统
                        </a>
                        <a href="/docs/mvc-core/namespace" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "namespace"}}active{{end}}">
                            <i class="fas fa-folder-tree me-2"></i>命名空间
                        </a>
                        <a href="/docs/mvc-core/annotation" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "annotation"}}active{{end}}">
                            <i class="fas fa-tags me-2"></i>注解路由系统
                        </a>
                        <a href="/docs/mvc-core/comment" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "comment"}}active{{end}}">
                            <i class="fas fa-comment-alt me-2"></i>注释路由系统
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 中间件系统 -->
        <div class="accordion-item">
            <h6 class="accordion-header" id="headingMiddleware">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMiddleware" aria-expanded="false">
                    <i class="fas fa-layer-group me-2 text-info"></i>中间件系统
                </button>
            </h6>
            <div id="collapseMiddleware" class="accordion-collapse collapse" data-bs-parent="#docsNavAccordion">
                <div class="accordion-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="/docs/middleware/overview" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "middleware-overview"}}active{{end}}">
                            <i class="fas fa-eye me-2"></i>中间件概览
                        </a>
                        <a href="/docs/middleware/builtin" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "middleware-builtin"}}active{{end}}">
                            <i class="fas fa-boxes me-2"></i>内置中间件
                        </a>
                        <a href="/docs/middleware/custom" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "custom"}}active{{end}}">
                            <i class="fas fa-tools me-2"></i>自定义中间件
                        </a>
                        <a href="/docs/middleware/config" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "config"}}active{{end}}">
                            <i class="fas fa-sliders-h me-2"></i>中间件配置
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 数据访问 -->
        <div class="accordion-item">
            <h6 class="accordion-header" id="headingDataAccess">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDataAccess" aria-expanded="false">
                    <i class="fas fa-database me-2 text-warning"></i>数据访问
                </button>
            </h6>
            <div id="collapseDataAccess" class="accordion-collapse collapse" data-bs-parent="#docsNavAccordion">
                <div class="accordion-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="/docs/data-access/gorm" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "gorm"}}active{{end}}">
                            <i class="fas fa-database me-2"></i>GORM集成
                        </a>
                        <a href="/docs/data-access/mybatis" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "mybatis"}}active{{end}}">
                            <i class="fas fa-table me-2"></i>MyBatis集成
                        </a>
                        <a href="/docs/data-access/database-config" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "database-config"}}active{{end}}">
                            <i class="fas fa-cog me-2"></i>数据库配置
                        </a>
                        <a href="/docs/data-access/transaction" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "transaction"}}active{{end}}">
                            <i class="fas fa-exchange-alt me-2"></i>事务管理
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 视图渲染 -->
        <div class="accordion-item">
            <h6 class="accordion-header" id="headingViewTemplate">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseViewTemplate" aria-expanded="false">
                    <i class="fas fa-eye me-2 text-info"></i>视图渲染
                </button>
            </h6>
            <div id="collapseViewTemplate" class="accordion-collapse collapse" data-bs-parent="#docsNavAccordion">
                <div class="accordion-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="/docs/view-template/overview" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "view-template-overview"}}active{{end}}">
                            <i class="fas fa-eye me-2"></i>视图概览
                        </a>
                        <a href="/docs/view-template/template-engine" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "template-engine"}}active{{end}}">
                            <i class="fas fa-cogs me-2"></i>模板引擎
                        </a>
                        <a href="/docs/view-template/view-rendering" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "view-rendering"}}active{{end}}">
                            <i class="fas fa-paint-brush me-2"></i>视图渲染
                        </a>
                        <a href="/docs/view-template/static-assets" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "static-assets"}}active{{end}}">
                            <i class="fas fa-file-code me-2"></i>静态资源
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 配置管理 -->
        <div class="accordion-item">
            <h6 class="accordion-header" id="headingConfiguration">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseConfiguration" aria-expanded="false">
                    <i class="fas fa-cog me-2 text-secondary"></i>配置管理
                </button>
            </h6>
            <div id="collapseConfiguration" class="accordion-collapse collapse" data-bs-parent="#docsNavAccordion">
                <div class="accordion-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="/docs/configuration/app-config" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "app-config"}}active{{end}}">
                            <i class="fas fa-cogs me-2"></i>应用配置
                        </a>
                        <a href="/docs/configuration/environment" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "environment"}}active{{end}}">
                            <i class="fas fa-server me-2"></i>环境配置
                        </a>
                        <a href="/docs/configuration/logging" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "logging"}}active{{end}}">
                            <i class="fas fa-file-alt me-2"></i>日志配置
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 高级功能 -->
        <div class="accordion-item">
            <h6 class="accordion-header" id="headingAdvanced">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAdvanced" aria-expanded="false">
                    <i class="fas fa-magic me-2" style="color: #8b5cf6;"></i>高级功能
                </button>
            </h6>
            <div id="collapseAdvanced" class="accordion-collapse collapse" data-bs-parent="#docsNavAccordion">
                <div class="accordion-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="/docs/advanced/session" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "session"}}active{{end}}">
                            <i class="fas fa-user-clock me-2"></i>会话管理
                        </a>
                        <a href="/docs/advanced/cache" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "cache"}}active{{end}}">
                            <i class="fas fa-memory me-2"></i>缓存系统
                        </a>
                        <a href="/docs/advanced/validation" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "validation"}}active{{end}}">
                            <i class="fas fa-check-circle me-2"></i>验证系统
                        </a>
                        <a href="/docs/advanced/captcha" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "captcha"}}active{{end}}">
                            <i class="fas fa-shield-alt me-2"></i>验证码功能
                        </a>
                        <a href="/docs/advanced/scheduler" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "scheduler"}}active{{end}}">
                            <i class="fas fa-clock me-2"></i>任务调度
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 部署运维 -->
        <div class="accordion-item">
            <h6 class="accordion-header" id="headingDeployment">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDeployment" aria-expanded="false">
                    <i class="fas fa-cloud me-2 text-success"></i>部署运维
                </button>
            </h6>
            <div id="collapseDeployment" class="accordion-collapse collapse" data-bs-parent="#docsNavAccordion">
                <div class="accordion-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="/docs/deployment/overview" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "deployment-overview"}}active{{end}}">
                            <i class="fas fa-rocket me-2"></i>部署概览
                        </a>
                        <a href="/docs/deployment/docker" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "docker"}}active{{end}}">
                            <i class="fab fa-docker me-2"></i>Docker部署
                        </a>
                        <a href="/docs/deployment/kubernetes" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "deployment-k8s"}}active{{end}}">
                            <i class="fas fa-dharmachakra me-2"></i>K8s部署
                        </a>
                        <a href="/docs/deployment/monitoring" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "monitoring"}}active{{end}}">
                            <i class="fas fa-chart-line me-2"></i>监控告警
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 开发工具 -->
        <div class="accordion-item">
            <h6 class="accordion-header" id="headingDevTools">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDevTools" aria-expanded="false">
                    <i class="fas fa-tools me-2 text-dark"></i>开发工具
                </button>
            </h6>
            <div id="collapseDevTools" class="accordion-collapse collapse" data-bs-parent="#docsNavAccordion">
                <div class="accordion-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="/docs/dev-tools/codegen" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "codegen"}}active{{end}}">
                            <i class="fas fa-code me-2"></i>代码生成
                        </a>
                        <a href="/docs/dev-tools/hot-reload" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "hot-reload"}}active{{end}}">
                            <i class="fas fa-sync me-2"></i>热重载
                        </a>
                        <a href="/docs/dev-tools/performance" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "performance"}}active{{end}}">
                            <i class="fas fa-tachometer-alt me-2"></i>性能监控
                        </a>
                        <a href="/docs/dev-tools/testing" class="list-group-item list-group-item-action border-0 {{if eq .CurrentDoc "testing"}}active{{end}}">
                            <i class="fas fa-vial me-2"></i>测试工具
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 返回文档首页按钮 -->
<div class="mt-3">
    <a href="/home/docs" class="btn btn-outline-primary w-100">
        <i class="fas fa-arrow-left me-2"></i>返回文档首页
    </a>
</div>
<!-- JavaScript for auto-expand current section -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const currentDoc = '{{.CurrentDoc}}';
        if (currentDoc) {
            // 定义页面与分组的映射关系
            const docGroups = {
                // 开始使用
                'overview': 'collapseGettingStarted',
                'quickstart': 'collapseGettingStarted',
                'structure': 'collapseGettingStarted',

                // MVC核心
                'application': 'collapseMvcCore',
                'controller': 'collapseMvcCore',
                'routing': 'collapseMvcCore',
                'namespace': 'collapseMvcCore',

                // 中间件系统
                'middleware-overview': 'collapseMiddleware',
                'builtin-middleware': 'collapseMiddleware',
                'custom-middleware': 'collapseMiddleware',
                'middleware-config': 'collapseMiddleware',

                // 数据访问
                'gorm': 'collapseDataAccess',
                'mybatis': 'collapseDataAccess',
                'database-config': 'collapseDataAccess',
                'transaction': 'collapseDataAccess',

                // 高级功能
                'session': 'collapseAdvanced',
                'cache': 'collapseAdvanced',
                'validation': 'collapseAdvanced',
                'captcha': 'collapseAdvanced',
                'scheduler': 'collapseAdvanced',

                // 开发工具
                'codegen': 'collapseDevTools',
                'hot-reload': 'collapseDevTools',
                'performance': 'collapseDevTools',
                'testing': 'collapseDevTools'
            };

            const targetGroup = docGroups[currentDoc];
            if (targetGroup) {
                const collapseElement = document.getElementById(targetGroup);
                if (collapseElement) {
                    // 显示对应的折叠组
                    new bootstrap.Collapse(collapseElement, {
                        show: true
                    });
                }
            }
        }
    });
</script>
{{end}}